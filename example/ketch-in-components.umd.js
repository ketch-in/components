(function(l,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(l=typeof globalThis!="undefined"?globalThis:l||self,o(l.ketchInComponents={}))})(this,function(l){"use strict";var O=Object.defineProperty,R=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var y=(l,o,a)=>o in l?O(l,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[o]=a,d=(l,o)=>{for(var a in o||(o={}))B.call(o,a)&&y(l,a,o[a]);if(f)for(var a of f(o))P.call(o,a)&&y(l,a,o[a]);return l},p=(l,o)=>R(l,A(o));var r=(l,o,a)=>(y(l,typeof o!="symbol"?o+"":o,a),a);var o="";const a={removeDelay:2e3};class C{constructor(e,t){r(this,"target");r(this,"options");this.target=e,this.options=t||{},this.clear()}getOption(e){return this.options[e]||a[e]}clear(){this.target.innerText=""}}const v="ketch-in-components";function g(u,e){const t=document.createElement(u,e);return t.className=v,t}class E{constructor({data:e,defaultClassName:t,removeDelay:n=2e3}){r(this,"data");r(this,"state");r(this,"element");r(this,"defaultClassName");r(this,"removeDelay");this.data=e,this.state="unmount",this.defaultClassName=t||"",this.removeDelay=n,this.element=this.createElement("div"),this.element.classList.add("container")}setRemoveDelay(e){return this.removeDelay=e,this}getRemoveDelay(){return this.removeDelay}createElement(e,t){const n=g(e,t);return n.classList.add(this.defaultClassName),n}getData(){return this.data}setState(e){return this.state=e,this.isUnmounting()?this.element.classList.add("unmount"):this.element.classList.remove("unmount"),this}getState(){return this.state}getElement(){return this.element}isMount(){return this.getState()==="mount"}isUnmount(){return this.getState()==="unmount"}isUnmounting(){return this.getState()==="unmounting"}async clear(){return this.isUnmount()||await this.unmount(),this.element=this.createElement("div"),this}async mount(e){return this.isMount()&&await this.unmount(),e.append(this.element),this.setState("mount")}unmount(){return new Promise(e=>{if(!this.isMount()){const t=setInterval(()=>{if(this.isUnmount())return clearInterval(t),e(this)},1e3)}this.setState("unmounting"),setTimeout(()=>{this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.setState("unmount").clear().then(()=>e(this))},this.getRemoveDelay())})}}class T extends E{constructor({children:t,removeDelay:n,data:i={},onClose:s=()=>{}}){super({data:i,removeDelay:n,defaultClassName:"modal"});r(this,"children");r(this,"onClose");this.children=t,this.onClose=()=>s(this)}mount(t){const n=this.getElement(),i=this.createElement("div");i.append(this.children),i.classList.add("body"),n.appendChild(i);const s=this.createElement("span");return s.innerText="\uB2EB\uAE30",s.classList.add("close"),s.onclick=()=>{s.onclick=()=>{},this.unmount().then(this.onClose)},n.appendChild(s),super.mount(t)}}class D extends C{constructor(e,t){super(e,t)}add(e){return new T(p(d({},e),{removeDelay:this.getOption("removeDelay")})).mount(this.target)}}class k extends E{constructor({children:t,buttons:n,removeDelay:i,data:s={},onClick:c=()=>{},onClose:h=()=>{}}){super({data:s,removeDelay:i,defaultClassName:"select-modal"});r(this,"children");r(this,"buttons");r(this,"onClose");r(this,"onClick");this.children=t,this.buttons=n,this.onClick=(m,x,N)=>(c(m,x,N),this),this.onClose=()=>h(this)}click(t){return super.unmount().then(()=>this.onClick(this,t,this.buttons[t]))}mount(t){const n=this.getElement(),i=this.createElement("div");i.append(this.children),i.classList.add("body"),n.appendChild(i);const s=this.createElement("span");s.innerText="\uB2EB\uAE30",s.classList.add("close"),s.onclick=()=>{s.onclick=()=>{},this.unmount().then(this.onClose)},n.appendChild(s);const c=this.createElement("div");return c.classList.add("btns"),n.appendChild(c),Object.keys(this.buttons).map(h=>{const m=this.createElement("button");m.classList.add(h),m.classList.add("btn"),m.innerText=this.buttons[h],m.onclick=()=>{m.onclick=()=>{},this.click(h)},c.append(m)}),super.mount(t)}}class b extends C{constructor(e,t){super(e,t)}add(e){return new k(p(d({},e),{removeDelay:this.getOption("removeDelay")})).mount(this.target)}}class L extends E{constructor({data:t,removeDelay:n,defaultClassName:i,momentDelay:s=2e3}){super({data:t,removeDelay:n,defaultClassName:i});r(this,"momentDelay");r(this,"momentTimeout");this.momentDelay=s,this.momentTimeout=null}setMomentTimeout(t){return this.momentTimeout=t,this}async mount(t){return super.mount(t).then(()=>this.setMomentTimeout(setTimeout(()=>this.unmount(),this.momentDelay)))}unmount(){return this.momentTimeout&&(clearTimeout(this.momentTimeout),this.setMomentTimeout(null)),super.unmount()}}class M extends L{constructor({children:t,data:n={},removeDelay:i=2e3,momentDelay:s=2e3,onClick:c=()=>{},onClose:h=()=>{}}){super({removeDelay:i,momentDelay:s,data:n,defaultClassName:"toast"});r(this,"children");r(this,"onClick");r(this,"onClose");this.children=t,this.onClick=c,this.onClose=m=>h(this,m)}mount(t){const n=this.getElement(),i=this.createElement("div"),s=this.createElement("span");return i.append(this.children),s.innerText="\uB2EB\uAE30",i.classList.add("text"),s.classList.add("close"),n.appendChild(i),n.appendChild(s),n.onclick=c=>{n.onclick=()=>{},!c.composedPath().some(h=>h===s)&&this.unmount(!0).then(this.onClick)},s.onclick=()=>{s.onclick=()=>{},this.unmount(!0)},super.mount(t)}unmount(t=!1){if(this.isMount()){const n=this.onClose(t),i=!!n||n===0?n:this.getRemoveDelay();this.setRemoveDelay(i)}return super.unmount()}}class S extends C{constructor(e,t){super(e,t)}add(e){return new M(p(d({},e),{removeDelay:this.getOption("removeDelay")})).mount(this.target)}}l.ModalController=D,l.SelectModalController=b,l.ToastController=S,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
